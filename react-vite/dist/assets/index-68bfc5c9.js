import{b as d,r as v,u as G,j as e,H as S,c as y,I as F,F as E}from"./index-8b89f411.js";import{S as k}from"./Sidebar-13def994.js";function I({grade:N,gradeId:i,studentId:o}){var h,x;const u=(h=d(r=>r.session.user))==null?void 0:h.settings.theme,n=(x=d(r=>r.session.user))==null?void 0:x.settings.font_size,[m,j]=v.useState(N),f=G(),$=()=>{f(S(JSON.stringify({grade:m}),i))};return e.jsxs(e.Fragment,{children:[e.jsxs("select",{className:`selpad10 ${u}1 ${u} font-${n}`,onChange:r=>j(r.target.value),value:m,children:[e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"F",children:"F"}),e.jsx("option",{value:0,children:"0"})]}),e.jsx("button",{className:"button",onClick:$,children:"Update grade"})]})}function D(){var h,x,r,b,C;const N=(h=d(s=>s.session.user))==null?void 0:h.settings.font_size,i=(x=d(s=>s.session.user))==null?void 0:x.settings.theme,o=(r=d(s=>s.session.user))==null?void 0:r.settings.role,u=d(s=>s.session.user),n=d(s=>s.grades.data),[m,j]=v.useState(!1),f=G(),$=y();return v.useEffect(()=>{u||$("/")}),v.useEffect(()=>{f(F()).then(()=>j(!0)),j(!0)},[f]),e.jsxs("div",{children:[e.jsx("div",{className:`flex column between ${i}1`,children:e.jsxs("main",{id:"main-container",className:"flex minh100 gap-60 mtop-229",children:[e.jsx(k,{selection:"grades"}),m&&n&&e.jsx("div",{id:"grades-container",className:`flex column gap-25 astart padding-40 ${i} font-${N} ${i}2`,children:e.jsxs("div",{className:"flex column gap-40",children:[o==="student"&&n.grades.map(({grade:s,title:c,id:l,course:a})=>e.jsxs("div",{className:"flex gap-40",children:[e.jsxs("div",{className:"flex between gap-10 w575",children:[e.jsxs("p",{children:[c,":"]}),e.jsxs("p",{children:[n.complete.filter(t=>t.complete&&t.course===a).length," / ",n.complete.filter(t=>t.assigned&&t.course===a).length," assignments completed"]})]}),e.jsxs("div",{className:"flex gap-15",children:[e.jsx("p",{children:"Current grade:"}),e.jsx("p",{children:s==="0"?"Not graded yet":s})]})]},`grade:${l}`)),o==="parent"&&e.jsxs(e.Fragment,{children:[!((b=n.children)!=null&&b.length)&&e.jsxs("div",{className:`flex padding-40 column gap-15 ${i}2`,children:[e.jsx("h1",{children:"No children linked to your account yet."}),e.jsx("p",{children:"Add children to get started."}),e.jsx("p",{children:"To add children navigate to the account tab in the sidebar."})]}),((C=n.children)==null?void 0:C.length)>0&&n.children.map(({child:s,complete:c,grades:l})=>e.jsxs("div",{className:"flex column gap-15",children:[e.jsx("p",{children:s.name}),!l.length&&e.jsxs("div",{className:`flex padding-40 column gap-15 ${i}2`,children:[e.jsx("h1",{children:"Child not assigned to courses yet."}),e.jsx("p",{children:"Contact administration to sign up for courses."})]}),l.length>0&&l.map(({grade:a,title:t,id:p,course:w})=>e.jsxs("div",{className:"flex gap-40",children:[e.jsxs("div",{className:"flex between gap-10 w575",children:[e.jsxs("p",{children:[t,":"]}),e.jsxs("p",{children:[c.filter(g=>g.complete&&g.course===w).length," / ",c.filter(g=>g.assigned&&g.course===w).length," assignments completed"]})]}),e.jsxs("div",{className:"flex gap-15",children:[e.jsx("p",{children:"Current grade:"}),e.jsx("p",{children:a==="0"?"Not graded yet":a})]})]},`grade:${p}`))]},`child:${s.id}`))]}),(o==="teacher"||o==="admin")&&n.courses.map(({course:s,students:c})=>e.jsxs("div",{className:"flex column gap-15",children:[e.jsxs("div",{className:"flex gap-15 between",children:[e.jsxs("p",{children:["Subject: ",s.title]}),e.jsxs("p",{children:["Level: ",s.level]})]}),e.jsx("div",{className:`flex column gap-10 padding-15 ${i}3`,children:c.map(({complete:l,grade:a,student:t})=>e.jsxs("div",{className:"flex wrap between gap-25 acenter",children:[e.jsx("p",{children:t.name}),e.jsxs("div",{className:"flex gap-60 acenter",children:[e.jsxs("p",{children:["Lessons: ",l.filter(p=>p.complete).length," complete / ",l.filter(p=>p.assigned===!0).length," assigned"]}),e.jsxs("p",{children:["current grade: ",a[0].grade]}),e.jsx("div",{className:"flex gap-15 acenter",children:e.jsx(I,{grade:a[0].grade,gradeId:a[0].id})})]})]},`student:${t.id}`))})]},`course:${s.id}`))]})})]})}),e.jsx(E,{})]})}export{D as default};
