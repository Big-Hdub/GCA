import{b as n,r as u,e as C,u as v,c as N,i as $,j as s,F as k,k as b}from"./index-8b89f411.js";import{C as w}from"./CreateCourseModal-91617ee1.js";import{O as h}from"./OpenModalButton-7d885f9e.js";import{C as F}from"./Confirm-8eb6fabe.js";import{S as D}from"./Sidebar-13def994.js";function M(){var m,x,p;const j=(m=n(e=>e.session.user))==null?void 0:m.settings.font_size,r=(x=n(e=>e.session.user))==null?void 0:x.settings.theme,i=(p=n(e=>e.session.user))==null?void 0:p.settings.role,a=n(e=>e.session.user),t=n(e=>e.courses.courses),[f,g]=u.useState(),{courseId:c}=C(),l=v(),o=N();u.useEffect(()=>{a||(o("/"),l($()),window.scroll(0,0))},[o,l,a]),u.useEffect(()=>{(async()=>{await l(b(+c)).then(g(!0))})()},[l,c]);const d=e=>{window.scroll(0,0),o(e)};return s.jsx(s.Fragment,{children:a&&s.jsxs("div",{children:[s.jsx("div",{className:`flex column between ${r}1`,children:s.jsx("main",{id:"main-container",className:"flex minh100 gap-60 mtop-229",children:f&&(t==null?void 0:t.course)&&s.jsxs(s.Fragment,{children:[s.jsx(D,{selection:"courses",course:t.course.title}),s.jsxs("div",{id:"course-container",className:`flex column gap-25 ${r} font-${j} ${r}2`,children:[i=="student"&&s.jsxs(s.Fragment,{children:[s.jsxs("h1",{children:["Assignments for ",t.course.title]}),t.lessons.filter(e=>e.assigned).map(e=>s.jsxs("div",{className:"flex gap-25",children:[s.jsx("p",{className:"link",onClick:()=>d(`/lessons/${e.id}`),children:e.title}),s.jsx("p",{children:e.type}),s.jsx("p",{children:e.complete?"Completed":"Not complete"})]},`lesson:${e.id}`))]}),i=="parent"&&s.jsxs(s.Fragment,{children:[s.jsxs("h1",{children:["Lessons for ",t.course.title," level: ",t.course.level]}),t.lessons.map(e=>s.jsxs("div",{className:"flex gap-15",children:[s.jsx("p",{className:"link",onClick:()=>d(`/lessons/${e.id}`),children:e.title}),s.jsx("p",{children:e.type})]},`lesson:${e.id}`))]}),(i=="teacher"||i=="admin")&&s.jsxs(s.Fragment,{children:[s.jsxs("h1",{children:["Lessons for ",t.course.title," level: ",t.course.level]}),t.lessons.map(e=>s.jsxs("div",{className:"flex gap-15",children:[s.jsx("p",{className:"link",onClick:()=>d(`/lessons/${e.id}`),children:e.title}),s.jsx("p",{children:e.type})]},`lesson:${e.id}`)),s.jsxs("div",{className:"aselfend flex gap-15",children:[s.jsx("button",{className:"button",onClick:()=>o(`/courses/${c}/lessons/new`),children:"Add lesson"}),s.jsx(h,{modalComponent:s.jsx(w,{course:t.course}),buttonText:"Update course"}),s.jsx(h,{modalComponent:s.jsx(F,{theme:r,navigate:()=>o("/courses"),courseId:+c}),buttonText:"Delete course",red:!0})]})]})]})]})})}),s.jsx(k,{})]})})}export{M as default};
